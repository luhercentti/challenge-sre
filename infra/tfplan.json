{"format_version":"1.2","terraform_version":"1.9.5","variables":{"gcp_project":{"value":"lhc-demo-1"},"redshift_password":{"value":"Peru2025!"},"region":{"value":"us-central1"}},"planned_values":{"root_module":{"resources":[{"address":"google_bigquery_data_transfer_config.pubsub_to_bq","mode":"managed","type":"google_bigquery_data_transfer_config","name":"pubsub_to_bq","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"data_refresh_window_days":null,"data_source_id":"pubsub","destination_dataset_id":"analytics_data","disabled":null,"display_name":"pubsub-to-bq","email_preferences":[],"encryption_configuration":[],"location":"us-central1","notification_pubsub_topic":null,"project":"lhc-demo-1","schedule":"every 5 minutes","schedule_options":[],"sensitive_params":[],"service_account_name":null,"timeouts":null},"sensitive_values":{"email_preferences":[],"encryption_configuration":[],"params":{},"schedule_options":[],"sensitive_params":[]}},{"address":"google_bigquery_dataset.analytics","mode":"managed","type":"google_bigquery_dataset","name":"analytics","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"dataset_id":"analytics_data","default_encryption_configuration":[],"default_partition_expiration_ms":null,"default_table_expiration_ms":null,"delete_contents_on_destroy":false,"description":"Dataset para datos analíticos","effective_labels":{"goog-terraform-provisioned":"true"},"external_catalog_dataset_options":[],"external_dataset_reference":[],"friendly_name":"Analytics Dataset","labels":null,"location":"us-central1","project":"lhc-demo-1","resource_tags":null,"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"sensitive_values":{"access":[],"default_encryption_configuration":[],"effective_labels":{},"external_catalog_dataset_options":[],"external_dataset_reference":[],"terraform_labels":{}}},{"address":"google_bigquery_table.events","mode":"managed","type":"google_bigquery_table","name":"events","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"biglake_configuration":[],"clustering":null,"dataset_id":"analytics_data","deletion_protection":true,"description":null,"effective_labels":{"goog-terraform-provisioned":"true"},"encryption_configuration":[],"external_catalog_table_options":[],"external_data_configuration":[],"friendly_name":null,"labels":null,"materialized_view":[],"project":"lhc-demo-1","range_partitioning":[],"require_partition_filter":null,"resource_tags":null,"schema":"[{\"mode\":\"REQUIRED\",\"name\":\"event_id\",\"type\":\"STRING\"},{\"name\":\"event_data\",\"type\":\"JSON\"},{\"mode\":\"REQUIRED\",\"name\":\"timestamp\",\"type\":\"TIMESTAMP\"}]","schema_foreign_type_info":[],"table_constraints":[],"table_id":"events","table_metadata_view":null,"table_replication_info":[],"terraform_labels":{"goog-terraform-provisioned":"true"},"time_partitioning":[],"view":[]},"sensitive_values":{"biglake_configuration":[],"effective_labels":{},"encryption_configuration":[],"external_catalog_table_options":[],"external_data_configuration":[],"materialized_view":[],"range_partitioning":[],"schema_foreign_type_info":[],"table_constraints":[],"table_replication_info":[],"terraform_labels":{},"time_partitioning":[],"view":[]}},{"address":"google_cloud_run_service.data_api","mode":"managed","type":"google_cloud_run_service","name":"data_api","provider_name":"registry.terraform.io/hashicorp/google","schema_version":2,"values":{"autogenerate_revision_name":false,"location":"us-central1","name":"data-api","project":"lhc-demo-1","template":[{"spec":[{"containers":[{"args":null,"command":null,"env":[],"env_from":[],"image":"gcr.io/lhc-demo-1/data-api:latest","liveness_probe":[],"volume_mounts":[],"working_dir":null}],"node_selector":null,"service_account_name":"api-service-account@lhc-demo-1.iam.gserviceaccount.com","volumes":[]}]}],"timeouts":null,"traffic":[{"latest_revision":true,"percent":100,"revision_name":null,"tag":null}]},"sensitive_values":{"metadata":[],"status":[],"template":[{"metadata":[],"spec":[{"containers":[{"env":[],"env_from":[],"liveness_probe":[],"ports":[],"resources":[],"startup_probe":[],"volume_mounts":[]}],"volumes":[]}]}],"traffic":[{}]}},{"address":"google_cloud_run_service_iam_policy.noauth","mode":"managed","type":"google_cloud_run_service_iam_policy","name":"noauth","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"location":"us-central1","policy_data":"{\"bindings\":[{\"members\":[\"allUsers\"],\"role\":\"roles/run.invoker\"}]}","project":"lhc-demo-1","service":"data-api"},"sensitive_values":{}},{"address":"google_monitoring_alert_policy.api_high_errors","mode":"managed","type":"google_monitoring_alert_policy","name":"api_high_errors","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"alert_strategy":[],"combiner":"OR","conditions":[{"condition_absent":[],"condition_matched_log":[],"condition_monitoring_query_language":[],"condition_prometheus_query_language":[],"condition_sql":[],"condition_threshold":[{"aggregations":[],"comparison":"COMPARISON_GT","denominator_aggregations":[],"denominator_filter":null,"duration":"300s","evaluation_missing_data":null,"filter":"resource.type=\"cloud_run_revision\" AND metric.type=\"run.googleapis.com/request_count\"","forecast_options":[],"threshold_value":5,"trigger":[]}],"display_name":"Error rate \u003e 5%"}],"display_name":"High API Error Rate","documentation":[],"enabled":true,"notification_channels":null,"project":"lhc-demo-1","severity":null,"timeouts":null,"user_labels":null},"sensitive_values":{"alert_strategy":[],"conditions":[{"condition_absent":[],"condition_matched_log":[],"condition_monitoring_query_language":[],"condition_prometheus_query_language":[],"condition_sql":[],"condition_threshold":[{"aggregations":[],"denominator_aggregations":[],"forecast_options":[],"trigger":[]}]}],"creation_record":[],"documentation":[]}},{"address":"google_project_iam_member.bq_access","mode":"managed","type":"google_project_iam_member","name":"bq_access","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"condition":[],"member":"serviceAccount:api-service-account@lhc-demo-1.iam.gserviceaccount.com","project":"lhc-demo-1","role":"roles/bigquery.dataViewer"},"sensitive_values":{"condition":[]}},{"address":"google_pubsub_subscription.data_subscription","mode":"managed","type":"google_pubsub_subscription","name":"data_subscription","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"bigquery_config":[],"cloud_storage_config":[],"dead_letter_policy":[],"effective_labels":{"goog-terraform-provisioned":"true"},"enable_exactly_once_delivery":null,"enable_message_ordering":null,"filter":null,"labels":null,"message_retention_duration":"604800s","name":"data-subscription","project":"lhc-demo-1","push_config":[],"retain_acked_messages":null,"retry_policy":[],"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null,"topic":"data-ingestion-topic"},"sensitive_values":{"bigquery_config":[],"cloud_storage_config":[],"dead_letter_policy":[],"effective_labels":{},"expiration_policy":[],"push_config":[],"retry_policy":[],"terraform_labels":{}}},{"address":"google_pubsub_topic.data_topic","mode":"managed","type":"google_pubsub_topic","name":"data_topic","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"effective_labels":{"goog-terraform-provisioned":"true"},"ingestion_data_source_settings":[],"kms_key_name":null,"labels":null,"message_retention_duration":null,"name":"data-ingestion-topic","project":"lhc-demo-1","schema_settings":[],"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"sensitive_values":{"effective_labels":{},"ingestion_data_source_settings":[],"message_storage_policy":[],"schema_settings":[],"terraform_labels":{}}},{"address":"google_service_account.api_sa","mode":"managed","type":"google_service_account","name":"api_sa","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"account_id":"api-service-account","create_ignore_already_exists":null,"description":null,"disabled":false,"display_name":"Service Account for Data API","email":"api-service-account@lhc-demo-1.iam.gserviceaccount.com","member":"serviceAccount:api-service-account@lhc-demo-1.iam.gserviceaccount.com","project":"lhc-demo-1","timeouts":null},"sensitive_values":{}}]}},"resource_changes":[{"address":"google_bigquery_data_transfer_config.pubsub_to_bq","mode":"managed","type":"google_bigquery_data_transfer_config","name":"pubsub_to_bq","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"data_refresh_window_days":null,"data_source_id":"pubsub","destination_dataset_id":"analytics_data","disabled":null,"display_name":"pubsub-to-bq","email_preferences":[],"encryption_configuration":[],"location":"us-central1","notification_pubsub_topic":null,"project":"lhc-demo-1","schedule":"every 5 minutes","schedule_options":[],"sensitive_params":[],"service_account_name":null,"timeouts":null},"after_unknown":{"email_preferences":[],"encryption_configuration":[],"id":true,"name":true,"params":true,"schedule_options":[],"sensitive_params":[]},"before_sensitive":false,"after_sensitive":{"email_preferences":[],"encryption_configuration":[],"params":{},"schedule_options":[],"sensitive_params":[]}}},{"address":"google_bigquery_dataset.analytics","mode":"managed","type":"google_bigquery_dataset","name":"analytics","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"dataset_id":"analytics_data","default_encryption_configuration":[],"default_partition_expiration_ms":null,"default_table_expiration_ms":null,"delete_contents_on_destroy":false,"description":"Dataset para datos analíticos","effective_labels":{"goog-terraform-provisioned":"true"},"external_catalog_dataset_options":[],"external_dataset_reference":[],"friendly_name":"Analytics Dataset","labels":null,"location":"us-central1","project":"lhc-demo-1","resource_tags":null,"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"after_unknown":{"access":true,"creation_time":true,"default_collation":true,"default_encryption_configuration":[],"effective_labels":{},"etag":true,"external_catalog_dataset_options":[],"external_dataset_reference":[],"id":true,"is_case_insensitive":true,"last_modified_time":true,"max_time_travel_hours":true,"self_link":true,"storage_billing_model":true,"terraform_labels":{}},"before_sensitive":false,"after_sensitive":{"access":[],"default_encryption_configuration":[],"effective_labels":{},"external_catalog_dataset_options":[],"external_dataset_reference":[],"terraform_labels":{}}}},{"address":"google_bigquery_table.events","mode":"managed","type":"google_bigquery_table","name":"events","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"biglake_configuration":[],"clustering":null,"dataset_id":"analytics_data","deletion_protection":true,"description":null,"effective_labels":{"goog-terraform-provisioned":"true"},"encryption_configuration":[],"external_catalog_table_options":[],"external_data_configuration":[],"friendly_name":null,"labels":null,"materialized_view":[],"project":"lhc-demo-1","range_partitioning":[],"require_partition_filter":null,"resource_tags":null,"schema":"[{\"mode\":\"REQUIRED\",\"name\":\"event_id\",\"type\":\"STRING\"},{\"name\":\"event_data\",\"type\":\"JSON\"},{\"mode\":\"REQUIRED\",\"name\":\"timestamp\",\"type\":\"TIMESTAMP\"}]","schema_foreign_type_info":[],"table_constraints":[],"table_id":"events","table_metadata_view":null,"table_replication_info":[],"terraform_labels":{"goog-terraform-provisioned":"true"},"time_partitioning":[],"view":[]},"after_unknown":{"biglake_configuration":[],"creation_time":true,"effective_labels":{},"encryption_configuration":[],"etag":true,"expiration_time":true,"external_catalog_table_options":[],"external_data_configuration":[],"id":true,"last_modified_time":true,"location":true,"materialized_view":[],"max_staleness":true,"num_bytes":true,"num_long_term_bytes":true,"num_rows":true,"range_partitioning":[],"schema_foreign_type_info":[],"self_link":true,"table_constraints":[],"table_replication_info":[],"terraform_labels":{},"time_partitioning":[],"type":true,"view":[]},"before_sensitive":false,"after_sensitive":{"biglake_configuration":[],"effective_labels":{},"encryption_configuration":[],"external_catalog_table_options":[],"external_data_configuration":[],"materialized_view":[],"range_partitioning":[],"schema_foreign_type_info":[],"table_constraints":[],"table_replication_info":[],"terraform_labels":{},"time_partitioning":[],"view":[]}}},{"address":"google_cloud_run_service.data_api","mode":"managed","type":"google_cloud_run_service","name":"data_api","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"autogenerate_revision_name":false,"location":"us-central1","name":"data-api","project":"lhc-demo-1","template":[{"spec":[{"containers":[{"args":null,"command":null,"env":[],"env_from":[],"image":"gcr.io/lhc-demo-1/data-api:latest","liveness_probe":[],"volume_mounts":[],"working_dir":null}],"node_selector":null,"service_account_name":"api-service-account@lhc-demo-1.iam.gserviceaccount.com","volumes":[]}]}],"timeouts":null,"traffic":[{"latest_revision":true,"percent":100,"revision_name":null,"tag":null}]},"after_unknown":{"id":true,"metadata":true,"status":true,"template":[{"metadata":true,"spec":[{"container_concurrency":true,"containers":[{"env":[],"env_from":[],"liveness_probe":[],"name":true,"ports":true,"resources":true,"startup_probe":true,"volume_mounts":[]}],"serving_state":true,"timeout_seconds":true,"volumes":[]}]}],"traffic":[{"url":true}]},"before_sensitive":false,"after_sensitive":{"metadata":[],"status":[],"template":[{"metadata":[],"spec":[{"containers":[{"env":[],"env_from":[],"liveness_probe":[],"ports":[],"resources":[],"startup_probe":[],"volume_mounts":[]}],"volumes":[]}]}],"traffic":[{}]}}},{"address":"google_cloud_run_service_iam_policy.noauth","mode":"managed","type":"google_cloud_run_service_iam_policy","name":"noauth","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"location":"us-central1","policy_data":"{\"bindings\":[{\"members\":[\"allUsers\"],\"role\":\"roles/run.invoker\"}]}","project":"lhc-demo-1","service":"data-api"},"after_unknown":{"etag":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"google_monitoring_alert_policy.api_high_errors","mode":"managed","type":"google_monitoring_alert_policy","name":"api_high_errors","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"alert_strategy":[],"combiner":"OR","conditions":[{"condition_absent":[],"condition_matched_log":[],"condition_monitoring_query_language":[],"condition_prometheus_query_language":[],"condition_sql":[],"condition_threshold":[{"aggregations":[],"comparison":"COMPARISON_GT","denominator_aggregations":[],"denominator_filter":null,"duration":"300s","evaluation_missing_data":null,"filter":"resource.type=\"cloud_run_revision\" AND metric.type=\"run.googleapis.com/request_count\"","forecast_options":[],"threshold_value":5,"trigger":[]}],"display_name":"Error rate \u003e 5%"}],"display_name":"High API Error Rate","documentation":[],"enabled":true,"notification_channels":null,"project":"lhc-demo-1","severity":null,"timeouts":null,"user_labels":null},"after_unknown":{"alert_strategy":[],"conditions":[{"condition_absent":[],"condition_matched_log":[],"condition_monitoring_query_language":[],"condition_prometheus_query_language":[],"condition_sql":[],"condition_threshold":[{"aggregations":[],"denominator_aggregations":[],"forecast_options":[],"trigger":[]}],"name":true}],"creation_record":true,"documentation":[],"id":true,"name":true},"before_sensitive":false,"after_sensitive":{"alert_strategy":[],"conditions":[{"condition_absent":[],"condition_matched_log":[],"condition_monitoring_query_language":[],"condition_prometheus_query_language":[],"condition_sql":[],"condition_threshold":[{"aggregations":[],"denominator_aggregations":[],"forecast_options":[],"trigger":[]}]}],"creation_record":[],"documentation":[]}}},{"address":"google_project_iam_member.bq_access","mode":"managed","type":"google_project_iam_member","name":"bq_access","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"condition":[],"member":"serviceAccount:api-service-account@lhc-demo-1.iam.gserviceaccount.com","project":"lhc-demo-1","role":"roles/bigquery.dataViewer"},"after_unknown":{"condition":[],"etag":true,"id":true},"before_sensitive":false,"after_sensitive":{"condition":[]}}},{"address":"google_pubsub_subscription.data_subscription","mode":"managed","type":"google_pubsub_subscription","name":"data_subscription","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"bigquery_config":[],"cloud_storage_config":[],"dead_letter_policy":[],"effective_labels":{"goog-terraform-provisioned":"true"},"enable_exactly_once_delivery":null,"enable_message_ordering":null,"filter":null,"labels":null,"message_retention_duration":"604800s","name":"data-subscription","project":"lhc-demo-1","push_config":[],"retain_acked_messages":null,"retry_policy":[],"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null,"topic":"data-ingestion-topic"},"after_unknown":{"ack_deadline_seconds":true,"bigquery_config":[],"cloud_storage_config":[],"dead_letter_policy":[],"effective_labels":{},"expiration_policy":true,"id":true,"push_config":[],"retry_policy":[],"terraform_labels":{}},"before_sensitive":false,"after_sensitive":{"bigquery_config":[],"cloud_storage_config":[],"dead_letter_policy":[],"effective_labels":{},"expiration_policy":[],"push_config":[],"retry_policy":[],"terraform_labels":{}}}},{"address":"google_pubsub_topic.data_topic","mode":"managed","type":"google_pubsub_topic","name":"data_topic","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"effective_labels":{"goog-terraform-provisioned":"true"},"ingestion_data_source_settings":[],"kms_key_name":null,"labels":null,"message_retention_duration":null,"name":"data-ingestion-topic","project":"lhc-demo-1","schema_settings":[],"terraform_labels":{"goog-terraform-provisioned":"true"},"timeouts":null},"after_unknown":{"effective_labels":{},"id":true,"ingestion_data_source_settings":[],"message_storage_policy":true,"schema_settings":[],"terraform_labels":{}},"before_sensitive":false,"after_sensitive":{"effective_labels":{},"ingestion_data_source_settings":[],"message_storage_policy":[],"schema_settings":[],"terraform_labels":{}}}},{"address":"google_service_account.api_sa","mode":"managed","type":"google_service_account","name":"api_sa","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"account_id":"api-service-account","create_ignore_already_exists":null,"description":null,"disabled":false,"display_name":"Service Account for Data API","email":"api-service-account@lhc-demo-1.iam.gserviceaccount.com","member":"serviceAccount:api-service-account@lhc-demo-1.iam.gserviceaccount.com","project":"lhc-demo-1","timeouts":null},"after_unknown":{"id":true,"name":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.9.5","values":{"root_module":{"resources":[{"address":"data.google_iam_policy.noauth","mode":"data","type":"google_iam_policy","name":"noauth","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"audit_config":null,"binding":[{"condition":[],"members":["allUsers"],"role":"roles/run.invoker"}],"id":"3450855414","policy_data":"{\"bindings\":[{\"members\":[\"allUsers\"],\"role\":\"roles/run.invoker\"}]}"},"sensitive_values":{"binding":[{"condition":[],"members":[false]}]}}]}}},"configuration":{"provider_config":{"google":{"name":"google","full_name":"registry.terraform.io/hashicorp/google","expressions":{"credentials":{},"project":{"references":["var.gcp_project"]},"region":{"references":["var.region"]}}}},"root_module":{"resources":[{"address":"google_bigquery_data_transfer_config.pubsub_to_bq","mode":"managed","type":"google_bigquery_data_transfer_config","name":"pubsub_to_bq","provider_config_key":"google","expressions":{"data_source_id":{"constant_value":"pubsub"},"destination_dataset_id":{"references":["google_bigquery_dataset.analytics.dataset_id","google_bigquery_dataset.analytics"]},"display_name":{"constant_value":"pubsub-to-bq"},"location":{"references":["var.region"]},"params":{"references":["google_pubsub_topic.data_topic.id","google_pubsub_topic.data_topic"]},"schedule":{"constant_value":"every 5 minutes"}},"schema_version":0},{"address":"google_bigquery_dataset.analytics","mode":"managed","type":"google_bigquery_dataset","name":"analytics","provider_config_key":"google","expressions":{"dataset_id":{"constant_value":"analytics_data"},"description":{"constant_value":"Dataset para datos analíticos"},"friendly_name":{"constant_value":"Analytics Dataset"},"location":{"references":["var.region"]}},"schema_version":0},{"address":"google_bigquery_table.events","mode":"managed","type":"google_bigquery_table","name":"events","provider_config_key":"google","expressions":{"dataset_id":{"references":["google_bigquery_dataset.analytics.dataset_id","google_bigquery_dataset.analytics"]},"schema":{"constant_value":"[\n  {\n    \"name\": \"event_id\",\n    \"type\": \"STRING\",\n    \"mode\": \"REQUIRED\"\n  },\n  {\n    \"name\": \"event_data\",\n    \"type\": \"JSON\"\n  },\n  {\n    \"name\": \"timestamp\",\n    \"type\": \"TIMESTAMP\",\n    \"mode\": \"REQUIRED\"\n  }\n]\n"},"table_id":{"constant_value":"events"}},"schema_version":0},{"address":"google_cloud_run_service.data_api","mode":"managed","type":"google_cloud_run_service","name":"data_api","provider_config_key":"google","expressions":{"location":{"references":["var.region"]},"name":{"constant_value":"data-api"},"template":[{"spec":[{"containers":[{"image":{"references":["var.gcp_project"]}}],"service_account_name":{"references":["google_service_account.api_sa.email","google_service_account.api_sa"]}}]}],"traffic":[{"latest_revision":{"constant_value":true},"percent":{"constant_value":100}}]},"schema_version":2},{"address":"google_cloud_run_service_iam_policy.noauth","mode":"managed","type":"google_cloud_run_service_iam_policy","name":"noauth","provider_config_key":"google","expressions":{"location":{"references":["google_cloud_run_service.data_api.location","google_cloud_run_service.data_api"]},"policy_data":{"references":["data.google_iam_policy.noauth.policy_data","data.google_iam_policy.noauth"]},"project":{"references":["google_cloud_run_service.data_api.project","google_cloud_run_service.data_api"]},"service":{"references":["google_cloud_run_service.data_api.name","google_cloud_run_service.data_api"]}},"schema_version":0},{"address":"google_monitoring_alert_policy.api_high_errors","mode":"managed","type":"google_monitoring_alert_policy","name":"api_high_errors","provider_config_key":"google","expressions":{"combiner":{"constant_value":"OR"},"conditions":[{"condition_threshold":[{"comparison":{"constant_value":"COMPARISON_GT"},"duration":{"constant_value":"300s"},"filter":{"constant_value":"resource.type=\"cloud_run_revision\" AND metric.type=\"run.googleapis.com/request_count\""},"threshold_value":{"constant_value":5}}],"display_name":{"constant_value":"Error rate \u003e 5%"}}],"display_name":{"constant_value":"High API Error Rate"}},"schema_version":0},{"address":"google_project_iam_member.bq_access","mode":"managed","type":"google_project_iam_member","name":"bq_access","provider_config_key":"google","expressions":{"member":{"references":["google_service_account.api_sa.email","google_service_account.api_sa"]},"project":{"references":["var.gcp_project"]},"role":{"constant_value":"roles/bigquery.dataViewer"}},"schema_version":0},{"address":"google_pubsub_subscription.data_subscription","mode":"managed","type":"google_pubsub_subscription","name":"data_subscription","provider_config_key":"google","expressions":{"name":{"constant_value":"data-subscription"},"topic":{"references":["google_pubsub_topic.data_topic.name","google_pubsub_topic.data_topic"]}},"schema_version":0},{"address":"google_pubsub_topic.data_topic","mode":"managed","type":"google_pubsub_topic","name":"data_topic","provider_config_key":"google","expressions":{"name":{"constant_value":"data-ingestion-topic"}},"schema_version":0},{"address":"google_service_account.api_sa","mode":"managed","type":"google_service_account","name":"api_sa","provider_config_key":"google","expressions":{"account_id":{"constant_value":"api-service-account"},"display_name":{"constant_value":"Service Account for Data API"}},"schema_version":0},{"address":"data.google_iam_policy.noauth","mode":"data","type":"google_iam_policy","name":"noauth","provider_config_key":"google","expressions":{"binding":[{"members":{"constant_value":["allUsers"]},"role":{"constant_value":"roles/run.invoker"}}]},"schema_version":0}],"variables":{"gcp_project":{"default":"","description":"The GCP project ID"},"redshift_password":{"description":"Password for BigQuery service account","sensitive":true},"region":{"default":"us-central1","description":"The GCP region"}}}},"relevant_attributes":[{"resource":"google_pubsub_topic.data_topic","attribute":["id"]},{"resource":"google_pubsub_topic.data_topic","attribute":["name"]},{"resource":"google_cloud_run_service.data_api","attribute":["project"]},{"resource":"google_cloud_run_service.data_api","attribute":["name"]},{"resource":"google_cloud_run_service.data_api","attribute":["location"]},{"resource":"data.google_iam_policy.noauth","attribute":["policy_data"]},{"resource":"google_service_account.api_sa","attribute":["email"]},{"resource":"google_bigquery_dataset.analytics","attribute":["dataset_id"]}],"timestamp":"2025-05-07T02:09:07Z","applyable":true,"complete":true,"errored":false}
